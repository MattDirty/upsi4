[gd_scene load_steps=18 format=3 uid="uid://ba45d85vm2ptv"]

[ext_resource type="PackedScene" uid="uid://kyeaogpfclel" path="res://Map/Map.tscn" id="1_61lmh"]
[ext_resource type="Script" path="res://Playground.gd" id="1_ffywb"]
[ext_resource type="PackedScene" uid="uid://dqwomwcwnjyrr" path="res://Characters/Player/Player.tscn" id="2_xgsak"]
[ext_resource type="PackedScene" uid="uid://b71d0wsey6gub" path="res://Characters/Enemies/Floater/Floater.tscn" id="4_8c3qm"]
[ext_resource type="PackedScene" path="res://Map/spawner.tscn" id="5_bynuq"]
[ext_resource type="PackedScene" uid="uid://be5af5p5i8d1q" path="res://Map/Objects/SafeZone/SafeZone.tscn" id="5_mjhiq"]
[ext_resource type="AudioStream" uid="uid://c3yebkf3cohgv" path="res://Assets/Sounds/HauntedLullabiesofJapan_EdoLullaby3.mp3" id="5_voe6j"]
[ext_resource type="PackedScene" path="res://Menu/clock.tscn" id="6_su8de"]
[ext_resource type="PackedScene" uid="uid://c8f151o6jlqsd" path="res://Menu/PauseMenu.tscn" id="8_f0cw0"]
[ext_resource type="AudioStream" uid="uid://dn14obickocq8" path="res://Assets/Sounds/SFX/old-church-bell-6298.mp3" id="9_l14sh"]
[ext_resource type="PackedScene" uid="uid://b287pelrtgn2b" path="res://Characters/Enemies/Demon/Demon.tscn" id="11_a3evy"]
[ext_resource type="Script" path="res://Unicorn.gd" id="12_exndv"]
[ext_resource type="Texture2D" uid="uid://re8l3l1o2l0h" path="res://Assets/Frosty.png" id="13_y71t5"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_fdvqq"]
size = Vector2(15, 17)

[sub_resource type="CircleShape2D" id="CircleShape2D_0r6p7"]
radius = 300.0

[sub_resource type="Gradient" id="Gradient_0tmeb"]
interpolation_mode = 2
offsets = PackedFloat32Array(0.0152672, 0.839695, 0.965649, 1)
colors = PackedColorArray(1, 1, 1, 0.905882, 1, 1, 1, 0.888764, 1, 1, 1, 0.486275, 1, 1, 1, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_vgey1"]
gradient = SubResource("Gradient_0tmeb")
width = 275
height = 275
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0.820513, 0.123932)

[node name="Playground" type="Node2D"]
script = ExtResource("1_ffywb")

[node name="Map" parent="." instance=ExtResource("1_61lmh")]

[node name="Player" parent="." instance=ExtResource("2_xgsak")]
unique_name_in_owner = true
speed = 200
max_health = null
interact_interval = null
outside_damage_interval = null

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="Player"]
stream = ExtResource("5_voe6j")
autoplay = true

[node name="SafeZonesSpawner" parent="." instance=ExtResource("5_bynuq")]
spawn_rate = 0.01
min_distance = 200.0
max_distance = 2000.0
max_units = 20
container_name = "SafeZones"

[node name="FloatersSpawner" parent="." instance=ExtResource("5_bynuq")]
character = ExtResource("4_8c3qm")
spawn_rate = 3.0
min_distance = 200.0
max_distance = 500.0
max_units = 4000000
container_name = "Floaters"

[node name="DemonsSpawner" parent="." instance=ExtResource("5_bynuq")]
character = ExtResource("11_a3evy")
spawn_rate = 10.0
min_distance = 500.0
max_distance = 700.0
max_units = 40000
container_name = "Demons"

[node name="InitialSafeZone" parent="." instance=ExtResource("5_mjhiq")]
initial_size = 0.5
metadata/_edit_lock_ = true

[node name="ClockBell" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("9_l14sh")

[node name="HourTimer" type="Timer" parent="."]
wait_time = 20.0

[node name="PauseMenu" parent="." instance=ExtResource("8_f0cw0")]
visible = false

[node name="Clock" parent="." instance=ExtResource("6_su8de")]

[node name="SafeZone" parent="." instance=ExtResource("5_mjhiq")]
position = Vector2(419, 181)

[node name="Unicorn" type="Node2D" parent="."]
position = Vector2(55, 53)
script = ExtResource("12_exndv")

[node name="Sprite2D" type="Sprite2D" parent="Unicorn"]
scale = Vector2(0.00987305, 0.00987305)
texture = ExtResource("13_y71t5")
region_rect = Rect2(0, 0, 1996.74, 1852.97)

[node name="Interact" type="Area2D" parent="Unicorn"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Unicorn/Interact"]
position = Vector2(0.5, -0.5)
shape = SubResource("RectangleShape2D_fdvqq")

[node name="SafeArea" type="Area2D" parent="Unicorn"]
scale = Vector2(0.095, 0.095)
collision_layer = 3
collision_mask = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="Unicorn/SafeArea"]
shape = SubResource("CircleShape2D_0r6p7")
debug_color = Color(0.635294, 0.741176, 0.00392157, 0.419608)

[node name="PointLight2D" type="PointLight2D" parent="Unicorn/SafeArea"]
scale = Vector2(0.755, 0.755)
blend_mode = 2
texture = SubResource("GradientTexture2D_vgey1")
texture_scale = 2.89

[connection signal="timeout" from="HourTimer" to="." method="_on_hour_timer_timeout"]
[connection signal="body_entered" from="Unicorn/Interact" to="Unicorn" method="_on_interact_body_entered"]
[connection signal="body_exited" from="Unicorn/Interact" to="Unicorn" method="_on_interact_body_exited"]
[connection signal="body_entered" from="Unicorn/SafeArea" to="Unicorn" method="_on_safe_area_body_entered"]
[connection signal="body_exited" from="Unicorn/SafeArea" to="Unicorn" method="_on_safe_area_body_exited"]
